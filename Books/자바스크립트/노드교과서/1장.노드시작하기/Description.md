# 핵심 개념

## 서버

- 서버는 네트워크를 통해 클라이언트에 정보나 서비스를 제공하는 컴퓨터 또는 프로그램을 말한다.
- 서버라고 해서 요청에 대한 응답만 하는 것은 아니다. 다른 서버에 요청을 보낼 수도 있다.

## 자바스크립트 런타임

- 노드는 자바스크립트 런타임이다.
- 런타임은 특정 언어로 만든 프로그램들을 실행할 수 있는 환경을 뜻한다.
- 따라서 노드는 자바스크립트 프로그램을 컴퓨터에서 실행할 수 있다.
- 노드는 자바스크립트 실행기다.
- 라이언 달이 v8엔진 기반의 노드 프로젝트를 시작했다.
- 노드는 v8과 더불어 Libuv라는 라이브러리를 사용한다.
  - v8과 libuv는 c와 c++로 구현되어있다.

## 이벤트 기반

- 이벤트 기반이란 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식을 의미한다.
  - 이벤트로는 클릭이나 네트워크 요청등이 있다.
- 미리 지정해둔 작업을 이벤트 리스너 혹은 콜백이라고 부른다.
- 이벤트 루프 : 여러 이벤트가 동시에 발생했을 때 어떤 순서로 콜백 함수를 호출할지를 이벤트 루프가 판단한다.
  - 이벤트 발생 시 호출할 콜백 함수들을 관리하고, 호출된 콜백 함수의 실행 순서를 결정하는 역할을 담당한다. 노드가 종료될 때까지 이벤트 처리를 위한 작업을 반복하므로 루프라고 부른다.
- 백그라운드 :
  - setTimeout같은 타이머나 이벤트 리스너들이 대기하는 곳이다. 자바스크립트가 아닌 다른 언어로 작성된 프로그램이라고 봐도 된다. 여러 작업이 동시에 실행될 수 있다.
- 태스크 큐 :
  - 이벤트 발생 후, 백그라운드에서는 태스크 큐로 타이머나 이벤트 리스너의 콜백 함수를 보낸다. 정해진 순서대로 콜백들이 줄을 서 있으므로 콜백 큐라고도 부른다. 콜백들은 보통 완료된 순서대로 줄을 서 있지만 특정한 경우에는 순서가 바뀌기도 한다.
- 컨텍스트는 함수가 호출되었을 때 생성되는 환경을 말한다.

## 논 블로킹 I/O

- 작업에는 2가지 종류가 있다.
  - 동시에 실행될 수 있는 작업
  - 동시에 실행될 수 없는 작업
- 파일 시스템 접근(읽기, 쓰기, 폴더 만들기 등등)이나 네트쿼으를 통한 요청 같은 작업이 I/O의 일종이다.
- setTimeout은 코드를 논 블로킹으로 만들기 위해 사용하는 기법 중 하나이다.
- 오래 걸리는 작업을 처리해야 하는 경우, 논 블로킹을 통해 실행 순서를 바꿔줌으로써 그 작업 때문에 간단한 작업들이 대기하는 상황을 막을 수 있다는 점에서 의의가 있다.

## 싱글 스레드

- 싱글 스레드란 스레드가 하나뿐이라는 것을 의미한다.
- 프로세스는 운영체제에서 할당하는 작업의 단위다. 노드나 웹 브라우저 같은 프로그램은 개별적인 프로세스다. 프로세스 간에는 메모리 등의 자원을 공유하지 않는다.
- 스레드는 프로세스 내에서 실행되는 흐름의 단위다. 프로세스는 스레드를 여러 개 생성해 여러 작업을 동시에 처리할 수 있다. 스레드들은 부모 프로세스의 자원을 공유한다. 같은 주소의 메모리에 접근 가능하므로 데이터를 공유할 수 있다.

- 노드가 싱글 스레드라는 말을 들어 봤을 것이다.
  - 하지만 엄밀히 말하면 싱글 스레드로 동작하지 않는다.
  - 노드를 실행하면 프로세스가 하나 생성된다.
  - 그 프로세스에서 스레드를 생성하는데, 이때 내부적으로 여러개의 스레드를 생성한다.
  - 그 중에서 직접 제어할 수 있는 스레드가 하나 뿐이다.
    - 그래서 노드가 싱글 스레드라고 불린다.

<br>

# 서버로의 노드

- 노드는 Libuv 라이브러리를 사용하여 I/O작업을 논 블로킹 방식으로 처리한다.
- 하지만 노드는 CPU 부하가 큰 작업에는 적합하지 않다.
